import{_ as D}from"./NPanelGrids.e209861e.js";import{a as j,a0 as M,r as C,l as x,ag as V,ah as $,a3 as N,ai as E,aj as y,ak as P,al as W,e as B,o as s,D as I,C as L,am as F,an as q,y as A,u as t,c as r,w as u,q as O,ab as S,F as R,b as n,j as i,t as T,f as w,h as U,a6 as z}from"./entry.eb90118b.js";import{_ as G}from"./LaunchPage.vue.a3f71c42.js";import"./NMarkdown.vue.4a55718e.js";import"./client.c658398a.js";const g=new Map,X=j({__name:"IframeView",props:{tab:{}},setup(k){const _=k,d=M(),m=C(),p=x(()=>_.tab.name),e=C(),o=V($(m));N(()=>{const a=_.tab.view,l=a.persistent!==!1,b=["clipboard-write","clipboard-read"];if(g.get(p.value)&&l)e.value=g.get(p.value),e.value.style.visibility="visible";else{e.value=document.createElement("iframe"),e.value.setAttribute("allow",b.join("; ")),l&&g.set(p.value,e.value),e.value.src=a.src;try{e.value.style.opacity="0.01",e.value.onload=()=>{h(),c(),e.value.style.opacity="1"}}catch{e.value.style.opacity="1"}document.body.appendChild(e.value),E(f)}setTimeout(c,100)}),y(f),y(c),y(h),P(()=>{e.value&&(e.value.style.visibility="hidden")});function c(){if(!(!e.value||!e.value.contentWindow))try{const a=e.value.contentWindow.document.querySelector("html");a?.classList.toggle("dark",d.value==="dark"),a?.classList.toggle("light",d.value==="dark"),new MutationObserver(()=>{d.value=e.value?.contentWindow?.document.querySelector("html")?.classList.contains("dark")?"dark":"light"}).observe(a,{attributes:!0,attributeFilter:["class"]})}catch{}}const v=W();function h(){if(!(!e.value||!e.value.contentWindow))try{e.value.contentWindow.__NUXT_DEVTOOLS__=v.value}catch{}}function f(){e.value&&Object.assign(e.value.style,{position:"fixed",left:`${o.left}px`,top:`${o.top}px`,width:`${o.width}px`,height:`${o.height}px`,outline:"none"})}return(a,l)=>(s(),B("div",{ref_key:"anchor",ref:m,"h-full":"","w-full":""},null,512))}}),H={flex:"~ col gap2",mxa:"","items-center":""},J=n("div",{"i-carbon-queued":"",mb2:"","text-5xl":"",op50:""},null,-1),K={"text-xl":""},Q={"text-rose":""},Y=n("p",{op50:""}," It might because the module contributing this tab is not installed or enabled ",-1),Z=n("p",{mt8:"","animate-pulse":""}," Redirecting to overview page... ",-1),ee=n("h3",{class:"mb2 text-lg font-medium leading-6",flex:"~ items-center gap-1","text-orange":""},[n("span",{class:"i-carbon-information-square"}),i(" Permissions required ")],-1),te=n("p",null," This operation requires permissions for running command and access files from the browser. ",-1),ne=n("p",null,[i(" A request is sent to the server."),n("br"),i(" Please check your terminal for the instructions and then come back. ")],-1),oe={flex:"~ gap-3",mt2:"","justify-end":""},ue=j({__name:"custom-[name]",setup(k){const _=I(),d=L(),m=x(()=>_.params.name),p=F(),e=x(()=>p.value.find(o=>o.name===m.value));return N(()=>{e.value?e.value.requireAuth&&!q.value&&A.requestForAuth():setTimeout(()=>{e.value||d.push("/modules/overview")},2e3)}),(o,c)=>{const v=D,h=U,f=z,a=X,l=G;return s(),B(R,null,[t(e)?O("",!0):(s(),r(v,{key:0},{default:u(()=>[n("div",H,[J,n("p",K,[i(" Tab "),n("code",Q,T(t(m)),1),i(" not found ")]),Y,Z])]),_:1})),t(e).requireAuth&&!("isDevAuthed"in o?o.isDevAuthed:t(q))?(s(),r(v,{key:1},{default:u(()=>[w(f,{flex:"~ col gap-2",mxa:"","items-center":"",p6:"","text-center":""},{default:u(()=>[ee,te,ne,n("div",oe,[w(h,{disabled:"",icon:"i-carbon-time"},{default:u(()=>[i(" Waiting for authorization... ")]),_:1})])]),_:1})]),_:1})):t(e).view.type==="iframe"?(s(),r(a,{key:2,tab:t(e)},null,8,["tab"])):t(e).view.type==="vnode"?(s(),r(S(t(e).view.vnode),{key:3})):t(e).view.type==="launch"?(s(),r(l,{key:4,icon:t(e).view.icon||t(e).icon,title:t(e).view.title||t(e).title,description:t(e).view.description,actions:t(e).view.actions,onAction:c[0]||(c[0]=b=>("rpc"in o?o.rpc:t(A)).customTabAction(t(e).name,b))},null,8,["icon","title","description","actions"])):(s(),r(v,{key:5},{default:u(()=>[w(f,{flex:"~ col","h-full":"","items-center":"","justify-center":""},{default:u(()=>[i(" Unknown tab type "+T(t(e).view),1)]),_:1})]),_:1}))],64)}}});export{ue as default};
